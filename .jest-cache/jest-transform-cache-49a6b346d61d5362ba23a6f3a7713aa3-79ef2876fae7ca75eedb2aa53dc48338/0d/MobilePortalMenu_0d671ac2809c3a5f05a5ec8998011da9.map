{"version":3,"names":["_default","MobilePortalMenu","className","cov_xq3bjei33","b","f","isAuthenticated","userProfile","user","isLoading","s","_authprovider","useAuth","currentLocale","getLocalizedPath","extractLocaleFromPath","_useLocaleRouter","useLocaleRouter","setIsLoading","_GlobalLoadingContext","useGlobalLoading","pathname","_navigation","usePathname","path","currentPath","getFilteredMenuItems","_navigation1","PORTAL_MENU","filter","item","type","_enums","PortalType","VOTE","isAdmin","is_admin","is_super_admin","user_metadata","isDevTempAdmin","process","env","NODE_ENV","filteredMenuItems","getCurrentActiveMenuItem","menuItem","isActive","startsWith","isVoteRelatedPath","activeMenuItem","handleLinkClick","href","portalConfig","_menujson","default","portals","find","portal","localizedMenuPath","_jsxruntime","jsx","jsxs","_link","onClick","name"],"sources":["/Users/charlie.hyun/Repositories/picnic-web/components/layouts/MobilePortalMenu.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useLocaleRouter } from '@/hooks/useLocaleRouter';\nimport { useGlobalLoading } from '@/contexts/GlobalLoadingContext';\nimport { useAuth } from '@/lib/supabase/auth-provider';\nimport { PortalType } from '@/utils/enums';\nimport { isVoteRelatedPath, PORTAL_MENU } from '@/config/navigation';\nimport menuConfig from '@/config/menu.json';\n\ninterface MobilePortalMenuProps {\n  className?: string;\n}\n\nconst MobilePortalMenu: React.FC<MobilePortalMenuProps> = ({ className = '' }) => {\n  const { isAuthenticated, userProfile, user, isLoading } = useAuth();\n  const { currentLocale, getLocalizedPath, extractLocaleFromPath } = useLocaleRouter();\n  const { setIsLoading } = useGlobalLoading();\n  const pathname = usePathname();\n\n  // 현재 경로에서 로케일 정보 추출\n  const { path: currentPath } = extractLocaleFromPath(pathname);\n\n  // 관리자 권한에 따른 메뉴 필터링\n  const getFilteredMenuItems = () => {\n    return PORTAL_MENU.filter(item => {\n      // VOTE는 항상 표시\n      if (item.type === PortalType.VOTE) return true;\n      \n      // 나머지는 관리자만 표시\n      if (!isAuthenticated || isLoading) return false;\n      \n      const isAdmin = userProfile?.is_admin || \n                     userProfile?.is_super_admin || \n                     user?.user_metadata?.is_admin || \n                     user?.user_metadata?.is_super_admin;\n\n      // 개발 환경에서 임시 관리자 권한\n      const isDevTempAdmin = process.env.NODE_ENV === 'development' && \n                            isAuthenticated && \n                            !isLoading && \n                            user;\n\n      return isAdmin || isDevTempAdmin;\n    });\n  };\n\n  const filteredMenuItems = getFilteredMenuItems();\n\n  // 현재 활성화된 포탈 메뉴 찾기\n  const getCurrentActiveMenuItem = () => {\n    for (const menuItem of filteredMenuItems) {\n      const isActive =\n        currentPath.startsWith(menuItem.path) ||\n        (menuItem.type === PortalType.VOTE && isVoteRelatedPath(currentPath));\n      \n      if (isActive) {\n        return menuItem;\n      }\n    }\n    return null; // 활성화된 포탈 메뉴가 없으면 null 반환\n  };\n\n  const activeMenuItem = getCurrentActiveMenuItem();\n  \n  const handleLinkClick = (href: string) => {\n    if (pathname !== href) {\n      setIsLoading(true);\n    }\n  };\n\n  // 활성화된 포탈 메뉴가 없으면 아무것도 표시하지 않음\n  if (!activeMenuItem) return null;\n\n  const portalConfig = menuConfig.portals.find(portal => portal.type === activeMenuItem.type);\n  if (!portalConfig) return null;\n\n  const localizedMenuPath = getLocalizedPath(activeMenuItem.path, currentLocale);\n\n  return (\n    <div className={`flex items-center ${className}`}>\n      <Link \n        href={localizedMenuPath}\n        onClick={() => handleLinkClick(localizedMenuPath)}\n        className={`group relative px-3 py-2 text-base font-medium transition-all duration-200 hover:scale-105 ${\n          activeMenuItem ? 'text-blue-600' : 'text-gray-700 hover:text-blue-600'\n        }`}\n      >\n        {activeMenuItem.name}\n        \n        {/* 호버 시에만 언더라인 표시 (데스크탑과 동일) */}\n        <div className={`absolute -bottom-1 left-1/2 transform -translate-x-1/2 h-0.5 bg-blue-600 rounded-full transition-all duration-300 w-0 group-hover:w-full`} />\n        \n        {/* 호버 시 배경 효과 */}\n        <div className={`absolute inset-0 bg-blue-50 rounded-lg transition-all duration-200 -z-10 ${\n          activeMenuItem ? 'opacity-20' : 'opacity-0 group-hover:opacity-10'\n        }`} />\n      </Link>\n    </div>\n  );\n};\n\nexport default MobilePortalMenu; "],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}