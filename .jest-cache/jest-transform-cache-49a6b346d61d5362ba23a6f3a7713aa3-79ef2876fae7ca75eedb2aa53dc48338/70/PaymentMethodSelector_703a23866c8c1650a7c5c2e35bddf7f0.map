{"version":3,"names":["PaymentMethodSelector","onMethodChange","className","cov_1kdeb5lavx","b","f","t","currentLanguage","s","_languageStore","useLanguageStore","selectedMethod","setSelectedMethod","_react","useState","isLoading","setIsLoading","detectedCountry","setDetectedCountry","isManuallySelected","setIsManuallySelected","useEffect","detectLocation","location","_ipdetection","detectUserLocation","method","getPaymentMethodByLocation","country","error","console","handleMethodChange","paymentMethods","id","name","description","icon","recommended","_jsxruntime","jsxs","jsx","Array","from","length","map","_","index","_framermotion","motion","button","onClick","whileHover","scale","whileTap","div","initial","opacity","animate","transition","duration","clearLocationCache","window","reload"],"sources":["/Users/charlie.hyun/Repositories/picnic-web/components/client/star-candy/PaymentMethodSelector.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { useLanguageStore } from '@/stores/languageStore';\nimport { detectUserLocation, getPaymentMethodByLocation, clearLocationCache } from '@/utils/ip-detection';\nimport { motion } from 'framer-motion';\n\nexport type PaymentMethod = 'portone' | 'paypal';\n\ninterface PaymentMethodSelectorProps {\n  onMethodChange: (method: PaymentMethod) => void;\n  className?: string;\n}\n\nexport function PaymentMethodSelector({ onMethodChange, className = '' }: PaymentMethodSelectorProps) {\n  const { t, currentLanguage } = useLanguageStore();\n  const [selectedMethod, setSelectedMethod] = useState<PaymentMethod>('paypal');\n  const [isLoading, setIsLoading] = useState(true);\n  const [detectedCountry, setDetectedCountry] = useState<string | null>(null);\n  const [isManuallySelected, setIsManuallySelected] = useState(false);\n\n  useEffect(() => {\n    // Detect user location on component mount\n    const detectLocation = async () => {\n      setIsLoading(true);\n      \n      try {\n        const location = await detectUserLocation();\n        \n        if (!isManuallySelected) {\n          const method = getPaymentMethodByLocation(location);\n          setSelectedMethod(method);\n          setDetectedCountry(location.country);\n          onMethodChange(method);\n        }\n      } catch (error) {\n        console.error('Error detecting location:', error);\n        // This should rarely happen since detectUserLocation now always returns a result\n        setSelectedMethod('paypal');\n        onMethodChange('paypal');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    detectLocation();\n  }, [onMethodChange, isManuallySelected]);\n\n  const handleMethodChange = (method: PaymentMethod) => {\n    setSelectedMethod(method);\n    setIsManuallySelected(true);\n    onMethodChange(method);\n  };\n\n  const paymentMethods = [\n    {\n      id: 'portone' as PaymentMethod,\n      name: 'Port One',\n      description: t('payment_method_portone_desc'),\n      icon: 'üá∞üá∑',\n      recommended: detectedCountry === 'South Korea',\n    },\n    {\n      id: 'paypal' as PaymentMethod,\n      name: 'PayPal',\n      description: t('payment_method_paypal_desc'),\n      icon: 'üåç',\n      recommended: detectedCountry !== 'South Korea',\n    },\n  ];\n\n  if (isLoading) {\n    return (\n      <div className={`space-y-4 ${className}`}>\n        {/* Title Skeleton */}\n        <div className=\"text-center\">\n          <div className=\"h-6 bg-gray-200 rounded-lg w-48 mx-auto mb-2 animate-pulse\"></div>\n          <div className=\"h-4 bg-gray-200 rounded-lg w-64 mx-auto animate-pulse\"></div>\n        </div>\n\n        {/* Payment Method Buttons Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {Array.from({ length: 2 }).map((_, index) => (\n            <div\n              key={index}\n              className=\"p-4 rounded-lg border-2 border-gray-200 animate-pulse\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-gray-200 rounded-full\"></div>\n                <div className=\"text-left flex-1\">\n                  <div className=\"h-5 bg-gray-200 rounded w-20 mb-1\"></div>\n                  <div className=\"h-4 bg-gray-200 rounded w-32\"></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      <div className=\"text-center\">\n        <h3 className=\"text-lg font-medium mb-2 text-gray-900\">{t('select_payment_method')}</h3>\n        {detectedCountry && !isManuallySelected && (\n          <p className=\"text-sm text-gray-600\">\n            {t('detected_location', { country: detectedCountry })}\n          </p>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {paymentMethods.map((method) => (\n          <motion.button\n            key={method.id}\n            onClick={() => handleMethodChange(method.id)}\n            className={`\n              relative p-4 rounded-lg border-2 transition-all\n              ${selectedMethod === method.id \n                ? 'border-primary bg-primary/5' \n                : 'border-gray-200 hover:border-gray-300'\n              }\n            `}\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n          >\n            {method.recommended && !isManuallySelected && (\n              <div className=\"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full z-10\">\n                {t('recommended')}\n              </div>\n            )}\n\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"text-3xl\">{method.icon}</span>\n              <div className=\"text-left\">\n                <h4 className=\"font-medium text-gray-900\">{method.name}</h4>\n                <p className=\"text-sm text-gray-600\">{method.description}</p>\n              </div>\n            </div>\n\n            {selectedMethod === method.id && (\n              <motion.div\n                className=\"absolute inset-0 border-2 border-primary rounded-lg pointer-events-none\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ duration: 0.2 }}\n              />\n            )}\n          </motion.button>\n        ))}\n      </div>\n\n      {isManuallySelected && (\n        <button\n          onClick={() => {\n            setIsManuallySelected(false);\n            clearLocationCache();\n            window.location.reload();\n          }}\n          className=\"text-sm text-primary hover:underline mx-auto block\"\n        >\n          {t('reset_to_auto_detection')}\n        </button>\n      )}\n    </div>\n  );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}