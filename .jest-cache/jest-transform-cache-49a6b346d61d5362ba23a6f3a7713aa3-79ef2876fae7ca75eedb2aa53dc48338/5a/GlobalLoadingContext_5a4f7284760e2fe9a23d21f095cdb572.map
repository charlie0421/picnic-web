{"version":3,"names":["cov_1chx34bo2l","actualCoverage","s","GlobalLoadingContext","f","GlobalLoadingProvider","useGlobalLoading","_react","createContext","undefined","children","isLoading","setIsLoading","useState","pathname","_navigation","usePathname","quickReleaseTimeoutRef","useRef","isCallbackPage","includes","useEffect","handleStartGlobalLoading","event","console","log","detail","current","b","clearTimeout","handleStopGlobalLoading","window","addEventListener","removeEventListener","setLoadingWithPageBasedRelease","loading","pageLoadTimeout","setTimeout","forceStopLoading","_jsxruntime","jsx","Provider","value","context","useContext","Error"],"sources":["/Users/charlie.hyun/Repositories/picnic-web/contexts/GlobalLoadingContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, useRef } from 'react';\nimport { usePathname } from 'next/navigation';\n\ninterface GlobalLoadingContextType {\n  isLoading: boolean;\n  setIsLoading: (loading: boolean) => void;\n  forceStopLoading: () => void;\n}\n\nexport const GlobalLoadingContext = createContext<GlobalLoadingContextType | undefined>(undefined);\n\nexport function GlobalLoadingProvider({ children }: { children: React.ReactNode }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const pathname = usePathname();\n  const quickReleaseTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const isCallbackPage = pathname?.includes('/auth/callback');\n\n  // 커스텀 이벤트 리스너 등록 (콜백 페이지에서 즉시 로딩 시작용)\n  useEffect(() => {\n    const handleStartGlobalLoading = (event: CustomEvent) => {\n      console.log('🔍 [GlobalLoading] 커스텀 이벤트 수신 (시작):', event.detail);\n      setIsLoading(true);\n      \n      // 기존 자동 해제 타이머 클리어\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n        quickReleaseTimeoutRef.current = null;\n      }\n    };\n\n    const handleStopGlobalLoading = (event: CustomEvent) => {\n      console.log('🔍 [GlobalLoading] 커스텀 이벤트 수신 (중지):', event.detail);\n      setIsLoading(false);\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n        quickReleaseTimeoutRef.current = null;\n      }\n    };\n\n    window.addEventListener('startGlobalLoading', handleStartGlobalLoading as EventListener);\n    window.addEventListener('stopGlobalLoading', handleStopGlobalLoading as EventListener);\n    \n    return () => {\n      window.removeEventListener('startGlobalLoading', handleStartGlobalLoading as EventListener);\n      window.removeEventListener('stopGlobalLoading', handleStopGlobalLoading as EventListener);\n    };\n  }, []);\n\n  // 페이지 이동 인디케이터용 setIsLoading (페이지 로드 완료 시 해제)\n  const setLoadingWithPageBasedRelease = (loading: boolean) => {\n    if (loading) {\n      console.log('🔍 [GlobalLoading] Starting page transition indicator');\n      setIsLoading(true);\n      \n      // 기존 릴리즈 타이머 클리어\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n      }\n    } else {\n      console.log('🔍 [GlobalLoading] Manual loading stop');\n      setIsLoading(false);\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n        quickReleaseTimeoutRef.current = null;\n      }\n    }\n  };\n\n  // 페이지 이동 시 로딩 상태 관리 (콜백 페이지는 제외)\n  useEffect(() => {\n    // 콜백 페이지에서는 자동 로딩 해제하지 않음\n    if (isCallbackPage) {\n      console.log('🔍 [GlobalLoading] 콜백 페이지 - 자동 로딩 해제 건너뜀');\n      return;\n    }\n\n    // 페이지 로드 완료 후 스켈레톤이 렌더링될 시간을 충분히 줌\n    const pageLoadTimeout = setTimeout(() => {\n      console.log('🔍 [GlobalLoading] Page loaded - hiding loading bar for skeleton display');\n      setIsLoading(false);\n    }, 300); // 스켈레톤 렌더링 대기 시간\n    \n    if (quickReleaseTimeoutRef.current) {\n      clearTimeout(quickReleaseTimeoutRef.current);\n      quickReleaseTimeoutRef.current = null;\n    }\n\n    return () => {\n      clearTimeout(pageLoadTimeout);\n    };\n  }, [pathname, isCallbackPage]);\n\n  // 강제로 로딩 중지하는 함수\n  const forceStopLoading = () => {\n    setIsLoading(false);\n    if (quickReleaseTimeoutRef.current) {\n      clearTimeout(quickReleaseTimeoutRef.current);\n      quickReleaseTimeoutRef.current = null;\n    }\n  };\n\n  return (\n    <GlobalLoadingContext.Provider value={{ isLoading, setIsLoading: setLoadingWithPageBasedRelease, forceStopLoading }}>\n      {children}\n    </GlobalLoadingContext.Provider>\n  );\n}\n\nexport function useGlobalLoading() {\n  const context = useContext(GlobalLoadingContext);\n  if (context === undefined) {\n    throw new Error('useGlobalLoading must be used within a GlobalLoadingProvider');\n  }\n  return context;\n} "],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}