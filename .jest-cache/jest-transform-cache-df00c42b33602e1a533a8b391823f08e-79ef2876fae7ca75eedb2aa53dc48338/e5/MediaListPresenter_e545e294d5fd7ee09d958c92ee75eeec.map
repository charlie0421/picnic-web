{"version":3,"names":["_default","MediaListPresenter","media","className","cov_s5l5nb6i4","f","currentLanguage","t","s","_languageStore","useLanguageStore","loadedImages","setLoadedImages","_react","useState","Set","imageErrors","setImageErrors","getTitleString","title","b","_strings","getLocalizedString","useEffect","preloadImages","priorityMedia","slice","preloadPromises","map","mediaItem","index","imageUrl","getOptimizedImageUrl","success","_imageutils","preloadImage","prev","newSet","add","process","env","NODE_ENV","console","log","warn","error","Promise","allSettled","length","useCallback","hasValidVideoId","video_id","trim","thumbnail_url","_image1","getCdnImageUrl","handleImageError","createImageErrorHandler","handleImageLoad","renderThumbnail","isLoaded","has","hasError","isPriority","_jsxruntime","jsxs","jsx","_image","default","src","alt","fill","sizes","priority","loading","unoptimized","includes","onLoad","onError","placeholder","blurDataURL","video_url","viewBox","d","_link","href","target","rel","Date","created_at","toLocaleDateString","year","month","day","id"],"sources":["/Users/cheolhyun/Repositories/picnic-web/components/client/media/MediaListPresenter.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Media } from '@/types/interfaces';\nimport { useLanguageStore } from '@/stores/languageStore';\nimport { getLocalizedString } from '@/utils/api/strings';\nimport { getCdnImageUrl } from '@/utils/api/image';\nimport { preloadImage, createImageErrorHandler } from '@/utils/image-utils';\n\ninterface MediaListProps {\n  media: Media[];\n  className?: string;\n}\n\nconst MediaListPresenter: React.FC<MediaListProps> = ({ media, className }) => {\n  const { currentLanguage, t } = useLanguageStore();\n  const [loadedImages, setLoadedImages] = useState<Set<string>>(new Set());\n  const [imageErrors, setImageErrors] = useState<Set<string>>(new Set());\n\n  const getTitleString = (title: any) => {\n    if (!title) return t('media_no_title');\n    if (typeof title === 'string') return title;\n    return getLocalizedString(title);\n  };\n\n  // 이미지 프리로딩 및 우선순위 처리\n  useEffect(() => {\n    const preloadImages = async () => {\n      // 첫 3개 미디어의 이미지를 프리로드\n      const priorityMedia = media.slice(0, 3);\n      \n      const preloadPromises = priorityMedia.map(async (mediaItem, index) => {\n        const imageUrl = getOptimizedImageUrl(mediaItem);\n        if (imageUrl && imageUrl !== '/images/logo.png') {\n          try {\n            const success = await preloadImage(imageUrl);\n            if (success) {\n              setLoadedImages(prev => {\n                const newSet = new Set(prev);\n                newSet.add(imageUrl);\n                return newSet;\n              });\n              if (process.env.NODE_ENV === 'development') {\n                console.log(`🖼️ [MediaList] 이미지 프리로드 성공 [${index + 1}]:`, imageUrl);\n              }\n            } else {\n              setImageErrors(prev => {\n                const newSet = new Set(prev);\n                newSet.add(imageUrl);\n                return newSet;\n              });\n              if (process.env.NODE_ENV === 'development') {\n                console.warn(`🖼️ [MediaList] 이미지 프리로드 실패 [${index + 1}]:`, imageUrl);\n              }\n            }\n          } catch (error) {\n            setImageErrors(prev => {\n              const newSet = new Set(prev);\n              newSet.add(imageUrl);\n              return newSet;\n            });\n            if (process.env.NODE_ENV === 'development') {\n              console.warn(`🖼️ [MediaList] 이미지 프리로드 에러 [${index + 1}]:`, imageUrl, error);\n            }\n          }\n        }\n      });\n\n      await Promise.allSettled(preloadPromises);\n    };\n\n    if (media.length > 0) {\n      preloadImages();\n    }\n  }, [media]);\n\n  // 최적화된 이미지 URL 생성\n  const getOptimizedImageUrl = useCallback((mediaItem: Media): string => {\n    const hasValidVideoId =\n      mediaItem.video_id &&\n      typeof mediaItem.video_id === 'string' &&\n      mediaItem.video_id.trim() !== '';\n\n    // 1. CDN 썸네일 우선 사용 (크기 최적화)\n    if (mediaItem.thumbnail_url) {\n      return getCdnImageUrl(mediaItem.thumbnail_url, 400); // 400px로 최적화\n    }\n    \n    // 2. YouTube 썸네일 (고화질 버전 사용)\n    if (hasValidVideoId) {\n      return `https://img.youtube.com/vi/${mediaItem.video_id}/hqdefault.jpg`;\n    }\n    \n    // 3. 기본 이미지\n    return '/images/logo.png';\n  }, []);\n\n  // 개선된 이미지 에러 핸들러\n  const handleImageError = useCallback((mediaItem: Media) => {\n    return createImageErrorHandler('/images/logo.png', true);\n  }, []);\n\n  // 이미지 로딩 완료 핸들러\n  const handleImageLoad = useCallback((imageUrl: string) => {\n    setLoadedImages(prev => {\n      const newSet = new Set(prev);\n      newSet.add(imageUrl);\n      return newSet;\n    });\n  }, []);\n\n  const renderThumbnail = (mediaItem: Media, index: number) => {\n    const imageUrl = getOptimizedImageUrl(mediaItem);\n    const isLoaded = loadedImages.has(imageUrl);\n    const hasError = imageErrors.has(imageUrl);\n    const isPriority = index < 3; // 첫 3개 이미지는 우선순위\n\n    return (\n      <div className='relative w-full aspect-video overflow-hidden rounded-lg bg-gray-100'>\n        {/* 로딩 상태 표시 */}\n        {!isLoaded && !hasError && (\n          <div className='absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse'>\n            <div className='w-12 h-12 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin'></div>\n          </div>\n        )}\n\n        <Image\n          src={imageUrl}\n          alt={getTitleString(mediaItem.title)}\n          fill\n          className={`\n            object-cover transition-all duration-500 \n            hover:scale-105 hover:brightness-110\n            ${isLoaded ? 'opacity-100' : 'opacity-0'}\n            ${hasError ? 'grayscale' : ''}\n          `}\n          sizes='(max-width: 640px) 100vw, (max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw'\n          priority={isPriority} // 첫 3개 이미지만 우선 로딩\n          loading={isPriority ? 'eager' : 'lazy'}\n          unoptimized={imageUrl.includes('youtube.com')} // YouTube 이미지만 unoptimized\n          onLoad={() => handleImageLoad(imageUrl)}\n          onError={handleImageError(mediaItem)}\n          placeholder=\"blur\"\n          blurDataURL=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==\"\n        />\n\n        {/* 플레이 버튼 오버레이 (비디오인 경우) */}\n        {(mediaItem.video_url || mediaItem.video_id) && (\n          <div className='absolute inset-0 flex items-center justify-center'>\n            <div className='w-16 h-16 bg-black/70 rounded-full flex items-center justify-center opacity-80 hover:opacity-100 transition-opacity'>\n              <svg\n                className='w-8 h-8 text-white ml-1'\n                fill='currentColor'\n                viewBox='0 0 24 24'\n              >\n                <path d='M8 5v14l11-7z' />\n              </svg>\n            </div>\n          </div>\n        )}\n\n        {/* 개발 환경에서 성능 지표 표시 */}\n        {process.env.NODE_ENV === 'development' && (\n          <div className='absolute top-2 left-2 flex gap-1'>\n            {isPriority && (\n              <div className='w-3 h-3 bg-green-500 rounded-full' title='Priority 이미지' />\n            )}\n            {isLoaded && (\n              <div className='w-3 h-3 bg-blue-500 rounded-full' title='로딩 완료' />\n            )}\n            {hasError && (\n              <div className='w-3 h-3 bg-red-500 rounded-full' title='로딩 실패' />\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className={`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${className || ''}`}>\n      {media.map((mediaItem, index) => (\n        <Link\n          href={\n            mediaItem.video_url ||\n            `https://www.youtube.com/watch?v=${mediaItem.video_id}`\n          }\n          key={mediaItem.id}\n          target='_blank'\n          rel='noopener noreferrer'\n          className='block group'\n        >\n          <article className='bg-white shadow-md rounded-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col h-full'>\n            {renderThumbnail(mediaItem, index)}\n            <div className='p-4 bg-white/95 backdrop-blur-sm flex-1 flex flex-col'>\n              <h2 className='text-lg font-semibold text-gray-800 mb-2 group-hover:text-blue-600 transition-colors h-14 overflow-hidden'>\n                <span className='line-clamp-2 leading-7'>\n                  {getTitleString(mediaItem.title)}\n                </span>\n              </h2>\n              <div className='flex items-center justify-between mt-auto'>\n                <p className='text-sm text-gray-600'>\n                  {new Date(mediaItem.created_at).toLocaleDateString(\n                    currentLanguage === 'ko' ? 'ko-KR' : 'en-US',\n                    {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                    },\n                  )}\n                </p>\n              </div>\n            </div>\n          </article>\n        </Link>\n      ))}\n\n      {media.length === 0 && (\n        <div className='text-center py-12 col-span-full'>\n          <div className='text-6xl mb-4'>🎬</div>\n          <p className='text-xl text-gray-800 font-medium mb-2'>{t('media_no_items')}</p>\n          <p className='text-gray-600'>{t('media_no_items_description') || '곧 새로운 미디어가 추가될 예정입니다.'}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MediaListPresenter;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}