{"version":3,"names":["GET","cov_a43smcf4f","f","s","POST","request","searchParams","URL","url","console","log","Object","fromEntries","entries","params","URLSearchParams","forEach","value","key","append","host","b","headers","get","protocol","includes","baseUrl","redirectUrl","toString","_server","NextResponse","redirect","error"],"sources":["/Users/cheolhyun/Repositories/picnic-web/app/api/auth/v1/callback/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\n\n/**\n * Supabase Apple OAuth ÏΩúÎ∞± ÌîÑÎ°ùÏãú\n *\n * SupabaseÍ∞Ä Í∏∞ÎåÄÌïòÎäî /api/auth/v1/callback URLÏùÑ\n * Ïã§Ï†ú Ïï±Ïùò ÏΩúÎ∞± ÌéòÏù¥ÏßÄÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏Ìï©ÎãàÎã§.\n */\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url);\n\n    console.log(\"üçé Apple OAuth ÏΩúÎ∞± ÏàòÏã†:\", request.url);\n    console.log(\n      \"üçé ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞:\",\n      Object.fromEntries(searchParams.entries()),\n    );\n\n    // URLÏùò Î™®Îì† ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞Î•º Í∞ÄÏ†∏ÏôÄÏÑú Í∑∏ÎåÄÎ°ú Ï†ÑÎã¨\n    const params = new URLSearchParams();\n    searchParams.forEach((value, key) => {\n      params.append(key, value);\n    });\n\n    // ÌòÑÏû¨ Ìò∏Ïä§Ìä∏Î•º ÎèôÏ†ÅÏúºÎ°ú Í∞êÏßÄÌïòÏó¨ Î¶¨Îã§Ïù¥Î†âÌä∏ URL ÏÉùÏÑ±\n    const host = request.headers.get(\"host\") || \"localhost:3000\";\n    const protocol = host.includes(\"localhost\") ? \"http\" : \"https\";\n    const baseUrl = `${protocol}://${host}`;\n\n    // Apple Î°úÍ∑∏Ïù∏ ÏΩúÎ∞± ÌéòÏù¥ÏßÄÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏\n    const redirectUrl = `${baseUrl}/auth/callback/apple?${params.toString()}`;\n\n    console.log(\"üçé Apple OAuth ÏΩúÎ∞± ÌîÑÎ°ùÏãú Î¶¨Îã§Ïù¥Î†âÌä∏:\", redirectUrl);\n\n    return NextResponse.redirect(redirectUrl);\n  } catch (error) {\n    console.error(\"üö® Apple OAuth ÏΩúÎ∞± ÌîÑÎ°ùÏãú Ïò§Î•ò:\", error);\n\n    // ÌòÑÏû¨ Ìò∏Ïä§Ìä∏Î•º ÎèôÏ†ÅÏúºÎ°ú Í∞êÏßÄÌïòÏó¨ Ïò§Î•ò ÌéòÏù¥ÏßÄÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏\n    const host = request.headers.get(\"host\") || \"localhost:3000\";\n    const protocol = host.includes(\"localhost\") ? \"http\" : \"https\";\n    const baseUrl = `${protocol}://${host}`;\n\n    return NextResponse.redirect(`${baseUrl}/?error=auth_callback_failed`);\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  // AppleÏùÄ ÎïåÎïåÎ°ú POSTÎ°ú ÏΩúÎ∞±ÏùÑ Î≥¥ÎÇº Ïàò ÏûàÏùå\n  return GET(request);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAQsBA,GAAG,WAAAA,CAAA;IAAA;IAAAC,aAAA,GAAAC,CAAA;IAAAD,aAAA,GAAAE,CAAA;WAAHH,GAAA;;EAuCAI,IAAI,WAAAA,CAAA;IAAA;IAAAH,aAAA,GAAAC,CAAA;IAAAD,aAAA,GAAAE,CAAA;WAAJC,IAAA;;;;;iCA/CoB;AAQnC,eAAeJ,IAAIK,OAAoB;EAAA;EAAAJ,aAAA,GAAAC,CAAA;EAAAD,aAAA,GAAAE,CAAA;EAC5C,IAAI;IACF,MAAM;MAAEG;IAAY,CAAE;IAAA;IAAA,CAAAL,aAAA,GAAAE,CAAA,OAAG,IAAII,GAAA,CAAIF,OAAA,CAAQG,GAAG;IAAA;IAAAP,aAAA,GAAAE,CAAA;IAE5CM,OAAA,CAAQC,GAAG,CAAC,yBAAyBL,OAAA,CAAQG,GAAG;IAAA;IAAAP,aAAA,GAAAE,CAAA;IAChDM,OAAA,CAAQC,GAAG,CACT,eACAC,MAAA,CAAOC,WAAW,CAACN,YAAA,CAAaO,OAAO;IAGzC;IACA,MAAMC,MAAA;IAAA;IAAA,CAAAb,aAAA,GAAAE,CAAA,QAAS,IAAIY,eAAA;IAAA;IAAAd,aAAA,GAAAE,CAAA;IACnBG,YAAA,CAAaU,OAAO,CAAC,CAACC,KAAA,EAAOC,GAAA;MAAA;MAAAjB,aAAA,GAAAC,CAAA;MAAAD,aAAA,GAAAE,CAAA;MAC3BW,MAAA,CAAOK,MAAM,CAACD,GAAA,EAAKD,KAAA;IACrB;IAEA;IACA,MAAMG,IAAA;IAAA;IAAA,CAAAnB,aAAA,GAAAE,CAAA;IAAO;IAAA,CAAAF,aAAA,GAAAoB,CAAA,UAAAhB,OAAA,CAAQiB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAAtB,aAAA,GAAAoB,CAAA,UAAW;IAC5C,MAAMG,QAAA;IAAA;IAAA,CAAAvB,aAAA,GAAAE,CAAA,QAAWiB,IAAA,CAAKK,QAAQ,CAAC;IAAA;IAAA,CAAAxB,aAAA,GAAAoB,CAAA,UAAe;IAAA;IAAA,CAAApB,aAAA,GAAAoB,CAAA,UAAS;IACvD,MAAMK,OAAA;IAAA;IAAA,CAAAzB,aAAA,GAAAE,CAAA,QAAU,GAAGqB,QAAA,MAAcJ,IAAA,EAAM;IAEvC;IACA,MAAMO,WAAA;IAAA;IAAA,CAAA1B,aAAA,GAAAE,CAAA,QAAc,GAAGuB,OAAA,wBAA+BZ,MAAA,CAAOc,QAAQ,IAAI;IAAA;IAAA3B,aAAA,GAAAE,CAAA;IAEzEM,OAAA,CAAQC,GAAG,CAAC,gCAAgCiB,WAAA;IAAA;IAAA1B,aAAA,GAAAE,CAAA;IAE5C,OAAO0B,OAAA,CAAAC,YAAY,CAACC,QAAQ,CAACJ,WAAA;EAC/B,EAAE,OAAOK,KAAA,EAAO;IAAA;IAAA/B,aAAA,GAAAE,CAAA;IACdM,OAAA,CAAQuB,KAAK,CAAC,6BAA6BA,KAAA;IAE3C;IACA,MAAMZ,IAAA;IAAA;IAAA,CAAAnB,aAAA,GAAAE,CAAA;IAAO;IAAA,CAAAF,aAAA,GAAAoB,CAAA,UAAAhB,OAAA,CAAQiB,OAAO,CAACC,GAAG,CAAC;IAAA;IAAA,CAAAtB,aAAA,GAAAoB,CAAA,UAAW;IAC5C,MAAMG,QAAA;IAAA;IAAA,CAAAvB,aAAA,GAAAE,CAAA,QAAWiB,IAAA,CAAKK,QAAQ,CAAC;IAAA;IAAA,CAAAxB,aAAA,GAAAoB,CAAA,UAAe;IAAA;IAAA,CAAApB,aAAA,GAAAoB,CAAA,UAAS;IACvD,MAAMK,OAAA;IAAA;IAAA,CAAAzB,aAAA,GAAAE,CAAA,QAAU,GAAGqB,QAAA,MAAcJ,IAAA,EAAM;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAEvC,OAAO0B,OAAA,CAAAC,YAAY,CAACC,QAAQ,CAAC,GAAGL,OAAA,8BAAqC;EACvE;AACF;AAEO,eAAetB,KAAKC,OAAoB;EAAA;EAAAJ,aAAA,GAAAC,CAAA;EAAAD,aAAA,GAAAE,CAAA;EAC7C;EACA,OAAOH,GAAA,CAAIK,OAAA;AACb","ignoreList":[]}