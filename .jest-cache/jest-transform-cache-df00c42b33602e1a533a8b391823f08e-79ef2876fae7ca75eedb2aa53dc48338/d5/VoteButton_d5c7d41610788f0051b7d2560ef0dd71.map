{"version":3,"names":["VoteButton","cov_lh00act","s","voteId","voteItemId","onVote","disabled","b","hasVoted","className","artistName","f","isVoting","setIsVoting","_react","useState","error","setError","t","_languageStore","useLanguageStore","withAuth","isAuthenticated","_useAuthGuard","useRequireAuth","customLoginMessage","title","description","loginText","cancelText","handleVote","err","errorMessage","console","getButtonText","_jsxruntime","jsxs","jsx","_common","Button","onClick","loading","variant","fullWidth"],"sources":["/Users/cheolhyun/Repositories/picnic-web/components/client/vote/common/VoteButton.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/common';\nimport { useRequireAuth } from '@/hooks/useAuthGuard';\nimport { useLanguageStore } from '@/stores/languageStore';\n\nexport interface VoteButtonProps {\n  voteId: string;\n  voteItemId: string;\n  onVote: (voteId: string, voteItemId: string) => Promise<void>;\n  disabled?: boolean;\n  hasVoted?: boolean;\n  className?: string;\n  artistName?: string; // 투표 대상 아티스트 이름 (다이얼로그에서 사용)\n}\n\nexport const VoteButton = ({\n  voteId,\n  voteItemId,\n  onVote,\n  disabled = false,\n  hasVoted = false,\n  className,\n  artistName,\n}: VoteButtonProps) => {\n  const [isVoting, setIsVoting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { t } = useLanguageStore();\n\n  const { withAuth, isAuthenticated } = useRequireAuth({\n    // 커스텀 로그인 다이얼로그 메시지\n    customLoginMessage: {\n      title: t('vote_login_required_title'),\n      description: artistName\n        ? t('vote_login_required_description_with_artist', { artistName })\n        : t('vote_login_required_description'),\n      loginText: t('button_login'),\n      cancelText: t('button_cancel'),\n    },\n  });\n\n  const handleVote = async () => {\n    if (disabled || hasVoted || isVoting) return;\n\n    // 인증이 필요한 투표 액션을 실행\n    await withAuth(async () => {\n      setIsVoting(true);\n      setError(null);\n\n      try {\n        await onVote(voteId, voteItemId);\n      } catch (err) {\n        const errorMessage = t('vote_error_general');\n        setError(errorMessage);\n        console.error('Vote error:', err);\n      } finally {\n        setIsVoting(false);\n      }\n    });\n  };\n\n  const getButtonText = () => {\n    if (hasVoted) {\n      return t('vote_button_completed');\n    }\n    if (isVoting) {\n      return t('vote_button_voting');\n    }\n    if (isAuthenticated) {\n      return t('vote_button_vote');\n    }\n    return t('vote_button_login_to_vote');\n  };\n\n  return (\n    <div className={className}>\n      <Button\n        onClick={handleVote}\n        disabled={disabled || hasVoted || isVoting}\n        loading={isVoting}\n        variant={hasVoted ? 'secondary' : 'primary'}\n        fullWidth\n      >\n        {getButtonText()}\n      </Button>\n\n      {error && (\n        <p className='mt-2 text-sm text-red-600 text-center'>{error}</p>\n      )}\n    </div>\n  );\n};\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAiBa;;;;;;WAAAA,UAAA;;;;;;;;+BAfY;;;+BACF;;;+BACQ;;;+BACE;AAAA;AAAAC,WAAA,GAAAC,CAAA;AAY1B,MAAMF,UAAA,GAAaA,CAAC;EACzBG,MAAM;EACNC,UAAU;EACVC,MAAM;EACNC,QAAA;EAAA;EAAA,CAAAL,WAAA,GAAAM,CAAA,UAAW,KAAK;EAChBC,QAAA;EAAA;EAAA,CAAAP,WAAA,GAAAM,CAAA,UAAW,KAAK;EAChBE,SAAS;EACTC;AAAU,CACM;EAAA;EAAAT,WAAA,GAAAU,CAAA;EAChB,MAAM,CAACC,QAAA,EAAUC,WAAA,CAAY;EAAA;EAAA,CAAAZ,WAAA,GAAAC,CAAA,OAAG,IAAAY,MAAA,CAAAC,QAAQ,EAAC;EACzC,MAAM,CAACC,KAAA,EAAOC,QAAA,CAAS;EAAA;EAAA,CAAAhB,WAAA,GAAAC,CAAA,QAAG,IAAAY,MAAA,CAAAC,QAAQ,EAAgB;EAClD,MAAM;IAAEG;EAAC,CAAE;EAAA;EAAA,CAAAjB,WAAA,GAAAC,CAAA,QAAG,IAAAiB,cAAA,CAAAC,gBAAgB;EAE9B,MAAM;IAAEC,QAAQ;IAAEC;EAAe,CAAE;EAAA;EAAA,CAAArB,WAAA,GAAAC,CAAA,QAAG,IAAAqB,aAAA,CAAAC,cAAc,EAAC;IACnD;IACAC,kBAAA,EAAoB;MAClBC,KAAA,EAAOR,CAAA,CAAE;MACTS,WAAA,EAAajB,UAAA;MAAA;MAAA,CAAAT,WAAA,GAAAM,CAAA,UACTW,CAAA,CAAE,+CAA+C;QAAER;MAAW;MAAA;MAAA,CAAAT,WAAA,GAAAM,CAAA,UAC9DW,CAAA,CAAE;MACNU,SAAA,EAAWV,CAAA,CAAE;MACbW,UAAA,EAAYX,CAAA,CAAE;IAChB;EACF;EAAA;EAAAjB,WAAA,GAAAC,CAAA;EAEA,MAAM4B,UAAA,GAAa,MAAAA,CAAA;IAAA;IAAA7B,WAAA,GAAAU,CAAA;IAAAV,WAAA,GAAAC,CAAA;IACjB;IAAI;IAAA,CAAAD,WAAA,GAAAM,CAAA,UAAAD,QAAA;IAAA;IAAA,CAAAL,WAAA,GAAAM,CAAA,UAAYC,QAAA;IAAA;IAAA,CAAAP,WAAA,GAAAM,CAAA,UAAYK,QAAA,GAAU;MAAA;MAAAX,WAAA,GAAAM,CAAA;MAAAN,WAAA,GAAAC,CAAA;MAAA;IAAA;IAAA;IAAA;MAAAD,WAAA,GAAAM,CAAA;IAAA;IAEtC;IAAAN,WAAA,GAAAC,CAAA;IACA,MAAMmB,QAAA,CAAS;MAAA;MAAApB,WAAA,GAAAU,CAAA;MAAAV,WAAA,GAAAC,CAAA;MACbW,WAAA,CAAY;MAAA;MAAAZ,WAAA,GAAAC,CAAA;MACZe,QAAA,CAAS;MAAA;MAAAhB,WAAA,GAAAC,CAAA;MAET,IAAI;QAAA;QAAAD,WAAA,GAAAC,CAAA;QACF,MAAMG,MAAA,CAAOF,MAAA,EAAQC,UAAA;MACvB,EAAE,OAAO2B,GAAA,EAAK;QACZ,MAAMC,YAAA;QAAA;QAAA,CAAA/B,WAAA,GAAAC,CAAA,QAAegB,CAAA,CAAE;QAAA;QAAAjB,WAAA,GAAAC,CAAA;QACvBe,QAAA,CAASe,YAAA;QAAA;QAAA/B,WAAA,GAAAC,CAAA;QACT+B,OAAA,CAAQjB,KAAK,CAAC,eAAee,GAAA;MAC/B,UAAU;QAAA;QAAA9B,WAAA,GAAAC,CAAA;QACRW,WAAA,CAAY;MACd;IACF;EACF;EAAA;EAAAZ,WAAA,GAAAC,CAAA;EAEA,MAAMgC,aAAA,GAAgBA,CAAA;IAAA;IAAAjC,WAAA,GAAAU,CAAA;IAAAV,WAAA,GAAAC,CAAA;IACpB,IAAIM,QAAA,EAAU;MAAA;MAAAP,WAAA,GAAAM,CAAA;MAAAN,WAAA,GAAAC,CAAA;MACZ,OAAOgB,CAAA,CAAE;IACX;IAAA;IAAA;MAAAjB,WAAA,GAAAM,CAAA;IAAA;IAAAN,WAAA,GAAAC,CAAA;IACA,IAAIU,QAAA,EAAU;MAAA;MAAAX,WAAA,GAAAM,CAAA;MAAAN,WAAA,GAAAC,CAAA;MACZ,OAAOgB,CAAA,CAAE;IACX;IAAA;IAAA;MAAAjB,WAAA,GAAAM,CAAA;IAAA;IAAAN,WAAA,GAAAC,CAAA;IACA,IAAIoB,eAAA,EAAiB;MAAA;MAAArB,WAAA,GAAAM,CAAA;MAAAN,WAAA,GAAAC,CAAA;MACnB,OAAOgB,CAAA,CAAE;IACX;IAAA;IAAA;MAAAjB,WAAA,GAAAM,CAAA;IAAA;IAAAN,WAAA,GAAAC,CAAA;IACA,OAAOgB,CAAA,CAAE;EACX;EAAA;EAAAjB,WAAA,GAAAC,CAAA;EAEA,oBACE,IAAAiC,WAAA,CAAAC,IAAA,EAAC;IAAI3B,SAAA,EAAWA,SAAA;4BACd,IAAA0B,WAAA,CAAAE,GAAA,EAACC,OAAA,CAAAC,MAAM;MACLC,OAAA,EAASV,UAAA;MACTxB,QAAA;MAAU;MAAA,CAAAL,WAAA,GAAAM,CAAA,UAAAD,QAAA;MAAA;MAAA,CAAAL,WAAA,GAAAM,CAAA,UAAYC,QAAA;MAAA;MAAA,CAAAP,WAAA,GAAAM,CAAA,UAAYK,QAAA;MAClC6B,OAAA,EAAS7B,QAAA;MACT8B,OAAA,EAASlC,QAAA;MAAA;MAAA,CAAAP,WAAA,GAAAM,CAAA,UAAW;MAAA;MAAA,CAAAN,WAAA,GAAAM,CAAA,UAAc;MAClCoC,SAAS;gBAERT,aAAA;;IAGF;IAAA,CAAAjC,WAAA,GAAAM,CAAA,WAAAS,KAAA;IAAA;IAAA,CAAAf,WAAA,GAAAM,CAAA,wBACC,IAAA4B,WAAA,CAAAE,GAAA,EAAC;MAAE5B,SAAA,EAAU;gBAAyCO;;;AAI9D","ignoreList":[]}