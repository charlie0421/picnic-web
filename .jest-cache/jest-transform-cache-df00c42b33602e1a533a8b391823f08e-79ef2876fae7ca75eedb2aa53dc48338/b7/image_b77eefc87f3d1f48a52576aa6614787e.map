{"version":3,"names":["cov_21d7kqs8n7","actualCoverage","s","getCdnImageUrl","path","width","f","b","cdnUrl","process","env","NEXT_PUBLIC_CDN_URL","currentLang","window","_languageStore","useLanguageStore","getState","currentLanguage","e","console","error","startsWith","trim","includes","pathObj","JSON","parse","localizedPath","en","ko","Object","values","normalizedPath","substring","widthParam","finalUrl","log"],"sources":["/Users/cheolhyun/Repositories/picnic-web/utils/api/image.ts"],"sourcesContent":["import { useLanguageStore } from \"@/stores/languageStore\";\n\n/**\n * CDN 이미지 URL을 생성하는 유틸리티 함수\n *\n * @param path 이미지 경로\n * @param width 이미지 너비\n * @returns CDN 이미지 URL\n */\nexport const getCdnImageUrl = (\n  path: string | null | undefined,\n  width?: number,\n): string => {\n  if (!path) return \"\";\n\n  const cdnUrl = process.env.NEXT_PUBLIC_CDN_URL || \"\";\n  let currentLang = \"en\"; // 기본값으로 영어 설정\n\n  try {\n    // 클라이언트 사이드에서만 store 접근\n    if (typeof window !== \"undefined\") {\n      currentLang = useLanguageStore.getState().currentLanguage;\n    }\n  } catch (e) {\n    console.error(\"언어 스토어 접근 오류:\", e);\n  }\n\n  // 이미 전체 URL인 경우 그대로 반환\n  if (path.startsWith(\"http://\") || path.startsWith(\"https://\")) {\n    return path.trim();\n  }\n\n  try {\n    // JSON 형식의 다국어 경로인지 확인\n    if (path.startsWith(\"{\") && path.includes('\":')) {\n      const pathObj = JSON.parse(path);\n      // 현재 언어의 경로가 있으면 사용, 없으면 영어나 한국어 순서로 시도\n      const localizedPath = pathObj[currentLang] || pathObj.en || pathObj.ko ||\n        Object.values(pathObj)[0];\n\n      // 슬래시로 시작하는지 확인하고 공백 제거\n      const normalizedPath = (localizedPath.startsWith(\"/\")\n        ? localizedPath.substring(1)\n        : localizedPath).trim();\n\n      // 최종 URL 생성\n      const widthParam = width ? `?w=${width}` : \"\";\n      const finalUrl = `${cdnUrl}/${normalizedPath}${widthParam}`;\n\n      console.log(\"finalUrl\", finalUrl);\n\n      return finalUrl;\n    }\n  } catch (e) {\n    console.error(\"이미지 경로 파싱 오류:\", e);\n    // JSON 파싱 실패 시 원래 경로 사용\n  }\n\n  // 슬래시로 시작하는지 확인하고 공백 제거\n  const normalizedPath = (path.startsWith(\"/\") ? path.substring(1) : path)\n    .trim();\n\n  // 최종 URL 생성\n  const widthParam = width ? `?w=${width}` : \"\";\n  const finalUrl = `${cdnUrl}/${normalizedPath}${widthParam}`;\n\n  return finalUrl;\n};\n"],"mappings":"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","ignoreList":[]}