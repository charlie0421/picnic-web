{"version":3,"names":["cov_1g6bsm8lgm","actualCoverage","s","useVoteList","status","area","initialVotes","b","f","supabase","_client","createBrowserSupabaseClient","votes","setVotes","_react","useState","isLoading","setIsLoading","error","setError","fetchVotes","useCallback","data","_voteservice","getVotesClient","err","console","useEffect","length","refetch"],"sources":["/Users/cheolhyun/Repositories/picnic-web/hooks/useVoteList.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { createBrowserSupabaseClient } from '@/lib/supabase/client';\nimport { Vote } from '@/types/interfaces';\nimport { VoteStatus, VoteArea } from '@/stores/voteFilterStore';\nimport { getVotesClient } from '@/lib/data-fetching/vote-service';\n\ninterface UseVoteListParams {\n  status?: VoteStatus;\n  area?: VoteArea;\n  initialVotes?: Vote[];\n}\n\ninterface UseVoteListReturn {\n  votes: Vote[];\n  isLoading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\n/**\n * 투표 리스트를 관리하는 단순화된 훅\n */\nexport function useVoteList({ \n  status, \n  area, \n  initialVotes = [] \n}: UseVoteListParams): UseVoteListReturn {\n  const supabase = createBrowserSupabaseClient();\n  const [votes, setVotes] = useState<Vote[]>(initialVotes);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchVotes = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      const data = await getVotesClient(supabase, status, area);\n      setVotes(data);\n    } catch (err) {\n      console.error('투표 데이터 로드 오류:', err);\n      setError(err as Error);\n      setVotes([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [supabase, status, area]);\n\n  // 초기 로드 및 필터 변경 시 데이터 페칭\n  useEffect(() => {\n    if (initialVotes.length === 0) {\n      fetchVotes();\n    }\n  }, [fetchVotes, initialVotes.length]);\n\n  return {\n    votes,\n    isLoading,\n    error,\n    refetch: fetchVotes,\n  };\n} "],"mappings":"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","ignoreList":[]}