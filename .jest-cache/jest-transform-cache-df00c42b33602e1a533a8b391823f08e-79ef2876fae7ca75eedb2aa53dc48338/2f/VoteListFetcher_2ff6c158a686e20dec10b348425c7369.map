{"version":3,"names":["cov_2kpgw1z5om","actualCoverage","s","VoteListFetcher","fetchVotes","status","area","f","supabase","_supabaseserverclient","createClient","query","_votedataformatter","buildVoteQuery","data","voteData","error","b","console","length","formatVoteData","_voteFilterStore","VOTE_STATUS","ONGOING","VOTE_AREAS","ALL","className","votes","_jsxruntime","jsxs","jsx","_list","VoteFilterSection","VoteListPresenter"],"sources":["/Users/cheolhyun/Repositories/picnic-web/components/server/vote/VoteListFetcher.tsx"],"sourcesContent":["import { createClient } from '@/utils/supabase-server-client';\nimport { buildVoteQuery, formatVoteData } from '@/utils/vote-data-formatter';\nimport { VoteListPresenter, VoteFilterSection } from '@/components/client/vote/list';\nimport { VOTE_STATUS, VOTE_AREAS, VoteStatus, VoteArea } from '@/stores/voteFilterStore';\nimport { Vote } from '@/types/interfaces';\n\n// 실제 Supabase에서 데이터를 가져오는 함수\nasync function fetchVotes(status: VoteStatus, area: VoteArea): Promise<Vote[]> {\n  try {\n    const supabase = await createClient();\n    \n    // 공통 쿼리 빌더 사용\n    const query = buildVoteQuery(supabase, status, area);\n    const { data: voteData, error } = await query;\n    \n    if (error) {\n      console.error('Vote fetch error:', error);\n      return [];\n    }\n    \n    if (!voteData || voteData.length === 0) {\n      return [];\n    }\n    \n    // 공통 포맷터 사용\n    return formatVoteData(voteData);\n  } catch (error) {\n    console.error('fetchVotes error:', error);\n    return [];\n  }\n}\n\ninterface VoteListFetcherProps {\n  status: VoteStatus;\n  area: VoteArea;\n  className?: string;\n}\n\n/**\n * 서버 컴포넌트: 투표 데이터를 서버에서 페칭하여 클라이언트 컴포넌트에 전달\n * \n * 장점:\n * - 초기 페이지 로드 시 빠른 렌더링 (서버에서 데이터 포함)\n * - SEO 최적화 (크롤러가 투표 내용 인덱싱 가능)\n * - 클라이언트 번들 크기 감소\n * \n * 사용법:\n * ```tsx\n * <VoteListFetcher status=\"ongoing\" area=\"all\" className=\"my-4\" />\n * ```\n */\nexport async function VoteListFetcher({ \n  status = VOTE_STATUS.ONGOING, \n  area = VOTE_AREAS.ALL, \n  className \n}: VoteListFetcherProps) {\n  const votes = await fetchVotes(status, area);\n  \n  return (\n    <div className={className}>\n      <VoteFilterSection />\n      <VoteListPresenter votes={votes} />\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]}