{"version":3,"names":["cov_1xviwn4thz","actualCoverage","s","GlobalLoadingContext","f","GlobalLoadingProvider","useGlobalLoading","_react","createContext","undefined","children","isLoading","setIsLoading","useState","pathname","_navigation","usePathname","quickReleaseTimeoutRef","useRef","useEffect","handleStartGlobalLoading","event","console","log","detail","handleStopGlobalLoading","current","b","clearTimeout","window","addEventListener","removeEventListener","setLoadingWithPageBasedRelease","loading","pageLoadTimeout","setTimeout","forceStopLoading","_jsxruntime","jsx","Provider","value","context","useContext","Error"],"sources":["/Users/cheolhyun/Repositories/picnic-web/contexts/GlobalLoadingContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, useRef } from 'react';\nimport { usePathname } from 'next/navigation';\n\ninterface GlobalLoadingContextType {\n  isLoading: boolean;\n  setIsLoading: (loading: boolean) => void;\n  forceStopLoading: () => void;\n}\n\nexport const GlobalLoadingContext = createContext<GlobalLoadingContextType | undefined>(undefined);\n\nexport function GlobalLoadingProvider({ children }: { children: React.ReactNode }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const pathname = usePathname();\n  const quickReleaseTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // 커스텀 이벤트 리스너 등록 (콜백 페이지에서 즉시 로딩 시작용)\n  useEffect(() => {\n    const handleStartGlobalLoading = (event: CustomEvent) => {\n      console.log('🔍 [GlobalLoading] 커스텀 이벤트 수신 (시작):', event.detail);\n      setIsLoading(true);\n    };\n\n    const handleStopGlobalLoading = (event: CustomEvent) => {\n      console.log('🔍 [GlobalLoading] 커스텀 이벤트 수신 (중지):', event.detail);\n      setIsLoading(false);\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n        quickReleaseTimeoutRef.current = null;\n      }\n    };\n\n    window.addEventListener('startGlobalLoading', handleStartGlobalLoading as EventListener);\n    window.addEventListener('stopGlobalLoading', handleStopGlobalLoading as EventListener);\n    \n    return () => {\n      window.removeEventListener('startGlobalLoading', handleStartGlobalLoading as EventListener);\n      window.removeEventListener('stopGlobalLoading', handleStopGlobalLoading as EventListener);\n    };\n  }, []);\n\n  // 페이지 이동 인디케이터용 setIsLoading (페이지 로드 완료 시 해제)\n  const setLoadingWithPageBasedRelease = (loading: boolean) => {\n    if (loading) {\n      console.log('🔍 [GlobalLoading] Starting page transition indicator');\n      setIsLoading(true);\n      \n      // 기존 릴리즈 타이머 클리어\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n      }\n    } else {\n      console.log('🔍 [GlobalLoading] Manual loading stop');\n      setIsLoading(false);\n      if (quickReleaseTimeoutRef.current) {\n        clearTimeout(quickReleaseTimeoutRef.current);\n        quickReleaseTimeoutRef.current = null;\n      }\n    }\n  };\n\n  // 페이지 이동 시 로딩 상태 관리 (페이지 로드 완료 후 해제)\n  useEffect(() => {\n    // 페이지 로드 완료 후 스켈레톤이 렌더링될 시간을 충분히 줌\n    const pageLoadTimeout = setTimeout(() => {\n      console.log('🔍 [GlobalLoading] Page loaded - hiding loading bar for skeleton display');\n      setIsLoading(false);\n    }, 300); // 스켈레톤 렌더링 대기 시간 증가\n    \n    if (quickReleaseTimeoutRef.current) {\n      clearTimeout(quickReleaseTimeoutRef.current);\n      quickReleaseTimeoutRef.current = null;\n    }\n\n    return () => {\n      clearTimeout(pageLoadTimeout);\n    };\n  }, [pathname]);\n\n  // 강제로 로딩 중지하는 함수\n  const forceStopLoading = () => {\n    setIsLoading(false);\n    if (quickReleaseTimeoutRef.current) {\n      clearTimeout(quickReleaseTimeoutRef.current);\n      quickReleaseTimeoutRef.current = null;\n    }\n  };\n\n  return (\n    <GlobalLoadingContext.Provider value={{ isLoading, setIsLoading: setLoadingWithPageBasedRelease, forceStopLoading }}>\n      {children}\n    </GlobalLoadingContext.Provider>\n  );\n}\n\nexport function useGlobalLoading() {\n  const context = useContext(GlobalLoadingContext);\n  if (context === undefined) {\n    throw new Error('useGlobalLoading must be used within a GlobalLoadingProvider');\n  }\n  return context;\n} "],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAagB;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;;;;;;;;;;;;;;EAFHC,oBAAoB,WAAAA,CAAA;IAAA;IAAAH,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WAApBC,oBAAA;;EAEGE,qBAAqB,WAAAA,CAAA;IAAA;IAAAL,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WAArBG,qBAAA;;EAoFAC,gBAAgB,WAAAA,CAAA;IAAA;IAAAN,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WAAhBI,gBAAA;;;;;;;;yEA/F8D;;;kCAClD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrB,MAAMH,oBAAA;AAAA;AAAA,cAAAH,cAAA,GAAAE,CAAA,QAAuB,IAAAK,MAAA,CAAAC,aAAa,EAAuCC,SAAA;AAEjF,SAASJ,sBAAsB;EAAEK;AAAQ,CAAiC;EAAA;EAAAV,cAAA,GAAAI,CAAA;EAC/E,MAAM,CAACO,SAAA,EAAWC,YAAA,CAAa;EAAA;EAAA,CAAAZ,cAAA,GAAAE,CAAA,QAAG,IAAAK,MAAA,CAAAM,QAAQ,EAAC;EAC3C,MAAMC,QAAA;EAAA;EAAA,CAAAd,cAAA,GAAAE,CAAA,QAAW,IAAAa,WAAA,CAAAC,WAAW;EAC5B,MAAMC,sBAAA;EAAA;EAAA,CAAAjB,cAAA,GAAAE,CAAA,QAAyB,IAAAK,MAAA,CAAAW,MAAM,EAAwB;EAE7D;EAAA;EAAAlB,cAAA,GAAAE,CAAA;EACA,IAAAK,MAAA,CAAAY,SAAS,EAAC;IAAA;IAAAnB,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACR,MAAMkB,wBAAA,GAA4BC,KAAA;MAAA;MAAArB,cAAA,GAAAI,CAAA;MAAAJ,cAAA,GAAAE,CAAA;MAChCoB,OAAA,CAAQC,GAAG,CAAC,uCAAuCF,KAAA,CAAMG,MAAM;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MAC/DU,YAAA,CAAa;IACf;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAEA,MAAMuB,uBAAA,GAA2BJ,KAAA;MAAA;MAAArB,cAAA,GAAAI,CAAA;MAAAJ,cAAA,GAAAE,CAAA;MAC/BoB,OAAA,CAAQC,GAAG,CAAC,uCAAuCF,KAAA,CAAMG,MAAM;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MAC/DU,YAAA,CAAa;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MACb,IAAIe,sBAAA,CAAuBS,OAAO,EAAE;QAAA;QAAA1B,cAAA,GAAA2B,CAAA;QAAA3B,cAAA,GAAAE,CAAA;QAClC0B,YAAA,CAAaX,sBAAA,CAAuBS,OAAO;QAAA;QAAA1B,cAAA,GAAAE,CAAA;QAC3Ce,sBAAA,CAAuBS,OAAO,GAAG;MACnC;MAAA;MAAA;QAAA1B,cAAA,GAAA2B,CAAA;MAAA;IACF;IAAA;IAAA3B,cAAA,GAAAE,CAAA;IAEA2B,MAAA,CAAOC,gBAAgB,CAAC,sBAAsBV,wBAAA;IAAA;IAAApB,cAAA,GAAAE,CAAA;IAC9C2B,MAAA,CAAOC,gBAAgB,CAAC,qBAAqBL,uBAAA;IAAA;IAAAzB,cAAA,GAAAE,CAAA;IAE7C,OAAO;MAAA;MAAAF,cAAA,GAAAI,CAAA;MAAAJ,cAAA,GAAAE,CAAA;MACL2B,MAAA,CAAOE,mBAAmB,CAAC,sBAAsBX,wBAAA;MAAA;MAAApB,cAAA,GAAAE,CAAA;MACjD2B,MAAA,CAAOE,mBAAmB,CAAC,qBAAqBN,uBAAA;IAClD;EACF,GAAG,EAAE;EAEL;EAAA;EAAAzB,cAAA,GAAAE,CAAA;EACA,MAAM8B,8BAAA,GAAkCC,OAAA;IAAA;IAAAjC,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACtC,IAAI+B,OAAA,EAAS;MAAA;MAAAjC,cAAA,GAAA2B,CAAA;MAAA3B,cAAA,GAAAE,CAAA;MACXoB,OAAA,CAAQC,GAAG,CAAC;MAAA;MAAAvB,cAAA,GAAAE,CAAA;MACZU,YAAA,CAAa;MAEb;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MACA,IAAIe,sBAAA,CAAuBS,OAAO,EAAE;QAAA;QAAA1B,cAAA,GAAA2B,CAAA;QAAA3B,cAAA,GAAAE,CAAA;QAClC0B,YAAA,CAAaX,sBAAA,CAAuBS,OAAO;MAC7C;MAAA;MAAA;QAAA1B,cAAA,GAAA2B,CAAA;MAAA;IACF,OAAO;MAAA;MAAA3B,cAAA,GAAA2B,CAAA;MAAA3B,cAAA,GAAAE,CAAA;MACLoB,OAAA,CAAQC,GAAG,CAAC;MAAA;MAAAvB,cAAA,GAAAE,CAAA;MACZU,YAAA,CAAa;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MACb,IAAIe,sBAAA,CAAuBS,OAAO,EAAE;QAAA;QAAA1B,cAAA,GAAA2B,CAAA;QAAA3B,cAAA,GAAAE,CAAA;QAClC0B,YAAA,CAAaX,sBAAA,CAAuBS,OAAO;QAAA;QAAA1B,cAAA,GAAAE,CAAA;QAC3Ce,sBAAA,CAAuBS,OAAO,GAAG;MACnC;MAAA;MAAA;QAAA1B,cAAA,GAAA2B,CAAA;MAAA;IACF;EACF;EAEA;EAAA;EAAA3B,cAAA,GAAAE,CAAA;EACA,IAAAK,MAAA,CAAAY,SAAS,EAAC;IAAA;IAAAnB,cAAA,GAAAI,CAAA;IACR;IACA,MAAM8B,eAAA;IAAA;IAAA,CAAAlC,cAAA,GAAAE,CAAA,QAAkBiC,UAAA,CAAW;MAAA;MAAAnC,cAAA,GAAAI,CAAA;MAAAJ,cAAA,GAAAE,CAAA;MACjCoB,OAAA,CAAQC,GAAG,CAAC;MAAA;MAAAvB,cAAA,GAAAE,CAAA;MACZU,YAAA,CAAa;IACf,GAAG,OAAM;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAET,IAAIe,sBAAA,CAAuBS,OAAO,EAAE;MAAA;MAAA1B,cAAA,GAAA2B,CAAA;MAAA3B,cAAA,GAAAE,CAAA;MAClC0B,YAAA,CAAaX,sBAAA,CAAuBS,OAAO;MAAA;MAAA1B,cAAA,GAAAE,CAAA;MAC3Ce,sBAAA,CAAuBS,OAAO,GAAG;IACnC;IAAA;IAAA;MAAA1B,cAAA,GAAA2B,CAAA;IAAA;IAAA3B,cAAA,GAAAE,CAAA;IAEA,OAAO;MAAA;MAAAF,cAAA,GAAAI,CAAA;MAAAJ,cAAA,GAAAE,CAAA;MACL0B,YAAA,CAAaM,eAAA;IACf;EACF,GAAG,CAACpB,QAAA,CAAS;EAEb;EAAA;EAAAd,cAAA,GAAAE,CAAA;EACA,MAAMkC,gBAAA,GAAmBA,CAAA;IAAA;IAAApC,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACvBU,YAAA,CAAa;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IACb,IAAIe,sBAAA,CAAuBS,OAAO,EAAE;MAAA;MAAA1B,cAAA,GAAA2B,CAAA;MAAA3B,cAAA,GAAAE,CAAA;MAClC0B,YAAA,CAAaX,sBAAA,CAAuBS,OAAO;MAAA;MAAA1B,cAAA,GAAAE,CAAA;MAC3Ce,sBAAA,CAAuBS,OAAO,GAAG;IACnC;IAAA;IAAA;MAAA1B,cAAA,GAAA2B,CAAA;IAAA;EACF;EAAA;EAAA3B,cAAA,GAAAE,CAAA;EAEA,oBACE,IAAAmC,WAAA,CAAAC,GAAA,EAACnC,oBAAA,CAAqBoC,QAAQ;IAACC,KAAA,EAAO;MAAE7B,SAAA;MAAWC,YAAA,EAAcoB,8BAAA;MAAgCI;IAAiB;cAC/G1B;;AAGP;AAEO,SAASJ,iBAAA;EAAA;EAAAN,cAAA,GAAAI,CAAA;EACd,MAAMqC,OAAA;EAAA;EAAA,CAAAzC,cAAA,GAAAE,CAAA,QAAU,IAAAK,MAAA,CAAAmC,UAAU,EAACvC,oBAAA;EAAA;EAAAH,cAAA,GAAAE,CAAA;EAC3B,IAAIuC,OAAA,KAAYhC,SAAA,EAAW;IAAA;IAAAT,cAAA,GAAA2B,CAAA;IAAA3B,cAAA,GAAAE,CAAA;IACzB,MAAM,IAAIyC,KAAA,CAAM;EAClB;EAAA;EAAA;IAAA3C,cAAA,GAAA2B,CAAA;EAAA;EAAA3B,cAAA,GAAAE,CAAA;EACA,OAAOuC,OAAA;AACT","ignoreList":[]}