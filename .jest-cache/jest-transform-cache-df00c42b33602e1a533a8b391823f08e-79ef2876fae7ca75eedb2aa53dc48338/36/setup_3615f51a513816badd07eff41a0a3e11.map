{"version":3,"sources":["/Users/cheolhyun/Repositories/picnic-web/__tests__/setup.ts"],"sourcesContent":["/**\n * Jest 테스트 환경 설정 파일\n * \n * 이 파일은 모든 테스트 파일 실행 전에 로드되어 테스트 환경을 구성합니다.\n * jest.setup.js 이후에 로드됩니다.\n */\n\nimport '@testing-library/jest-dom';\n\n// Polyfill for missing globals in JSDom\n// Node.js에서 제공하는 TextEncoder/TextDecoder를 사용하면 타입 오류가 발생할 수 있어\n// 단순한 전역 객체 설정으로 변경합니다.\nif (typeof global.TextEncoder === 'undefined') {\n  global.TextEncoder = require('util').TextEncoder;\n}\n\nif (typeof global.TextDecoder === 'undefined') {\n  global.TextDecoder = require('util').TextDecoder;\n}\n\n// Server Component 관련 모킹\njest.mock('react', () => {\n  const originalReact = jest.requireActual('react');\n  return {\n    ...originalReact,\n    cache: jest.fn((fn) => fn),\n    use: jest.fn((promise) => {\n      if (promise && typeof promise.then === 'function') {\n        throw new Error(\n          'React.use() is not supported in test environment. Please mock your async functions.'\n        );\n      }\n      return promise;\n    }),\n  };\n});\n\n// Next.js 캐시 관련 모킹\njest.mock('next/cache', () => ({\n  revalidatePath: jest.fn(),\n  revalidateTag: jest.fn(),\n  unstable_cache: jest.fn((fn) => fn),\n}));\n\n// 전역 테스트 타임아웃 설정\njest.setTimeout(10000);\n\n// 콘솔 경고 필터링 (필요한 경우)\nconst originalConsoleError = console.error;\nconsole.error = (...args) => {\n  // React 18의 특정 경고 메시지를 필터링\n  const suppressedWarnings = [\n    'Warning: ReactDOM.render is no longer supported',\n    'Warning: You are importing createRoot',\n  ];\n  \n  if (typeof args[0] === 'string' && suppressedWarnings.some(warning => args[0].includes(warning))) {\n    return;\n  }\n  \n  originalConsoleError(...args);\n}; "],"names":["jest","mock","originalReact","requireActual","cache","fn","use","promise","then","Error","revalidatePath","revalidateTag","unstable_cache","global","TextEncoder","require","TextDecoder","setTimeout","originalConsoleError","console","error","args","suppressedWarnings","some","warning","includes"],"mappings":"AAAA;;;;;CAKC;AAeD,yBAAyB;AACzBA,KAAKC,IAAI,CAAC,SAAS;IACjB,MAAMC,gBAAgBF,KAAKG,aAAa,CAAC;IACzC,OAAO;QACL,GAAGD,aAAa;QAChBE,OAAOJ,KAAKK,EAAE,CAAC,CAACA,KAAOA;QACvBC,KAAKN,KAAKK,EAAE,CAAC,CAACE;YACZ,IAAIA,WAAW,OAAOA,QAAQC,IAAI,KAAK,YAAY;gBACjD,MAAM,IAAIC,MACR;YAEJ;YACA,OAAOF;QACT;IACF;AACF;AAEA,mBAAmB;AACnBP,KAAKC,IAAI,CAAC,cAAc,IAAO,CAAA;QAC7BS,gBAAgBV,KAAKK,EAAE;QACvBM,eAAeX,KAAKK,EAAE;QACtBO,gBAAgBZ,KAAKK,EAAE,CAAC,CAACA,KAAOA;IAClC,CAAA;;;;QAnCO;AAEP,wCAAwC;AACxC,+DAA+D;AAC/D,wBAAwB;AACxB,IAAI,OAAOQ,OAAOC,WAAW,KAAK,aAAa;IAC7CD,OAAOC,WAAW,GAAGC,QAAQ,QAAQD,WAAW;AAClD;AAEA,IAAI,OAAOD,OAAOG,WAAW,KAAK,aAAa;IAC7CH,OAAOG,WAAW,GAAGD,QAAQ,QAAQC,WAAW;AAClD;AA0BA,iBAAiB;AACjBhB,KAAKiB,UAAU,CAAC;AAEhB,qBAAqB;AACrB,MAAMC,uBAAuBC,QAAQC,KAAK;AAC1CD,QAAQC,KAAK,GAAG,CAAC,GAAGC;IAClB,2BAA2B;IAC3B,MAAMC,qBAAqB;QACzB;QACA;KACD;IAED,IAAI,OAAOD,IAAI,CAAC,EAAE,KAAK,YAAYC,mBAAmBC,IAAI,CAACC,CAAAA,UAAWH,IAAI,CAAC,EAAE,CAACI,QAAQ,CAACD,WAAW;QAChG;IACF;IAEAN,wBAAwBG;AAC1B"}