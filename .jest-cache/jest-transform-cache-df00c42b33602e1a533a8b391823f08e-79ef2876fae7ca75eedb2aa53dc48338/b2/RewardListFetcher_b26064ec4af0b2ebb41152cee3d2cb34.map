{"version":3,"names":["cov_1gs68tmjcu","actualCoverage","s","RewardListFetcher","fetchRewards","f","supabase","_supabaseserverclient","createClient","data","rewards","error","from","select","order","ascending","b","console","transformRewardData","dbRewards","map","reward","title","_strings","getLocalizedString","thumbnail","_image","getCdnImageUrl","createdAt","created_at","Date","toISOString","className","showViewAllLink","clientRewards","_jsxruntime","jsx","_RewardPresenter","RewardListPresenter"],"sources":["/Users/cheolhyun/Repositories/picnic-web/components/server/reward/RewardListFetcher.tsx"],"sourcesContent":["import { createClient } from \"@/utils/supabase-server-client\";\nimport { Reward as DBReward } from \"@/types/interfaces\";\nimport { getLocalizedString } from \"@/utils/api/strings\";\nimport { getCdnImageUrl } from \"@/utils/api/image\";\nimport { RewardListPresenter } from \"@/components/client/reward/RewardPresenter\";\n\n// 활성 리워드 데이터를 서버에서 페칭\nasync function fetchRewards(): Promise<DBReward[]> {\n  try {\n    const supabase = await createClient();\n    const { data: rewards, error } = await supabase\n      .from('reward')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Failed to fetch rewards:', error);\n      return [];\n    }\n\n    return rewards || [];\n  } catch (error) {\n    console.error('Failed to fetch rewards:', error);\n    return [];\n  }\n}\n\n// DB Reward 타입을 Client Reward 타입으로 변환\nfunction transformRewardData(dbRewards: DBReward[]): DBReward[] {\n  return dbRewards.map(reward => ({\n    ...reward,\n    title: getLocalizedString(reward.title) || '리워드',\n    thumbnail: reward.thumbnail ? getCdnImageUrl(reward.thumbnail) : null,\n    createdAt: reward.created_at || new Date().toISOString()\n  }));\n}\n\nexport interface RewardListFetcherProps {\n  className?: string;\n  showViewAllLink?: boolean;\n}\n\n/**\n * 서버 컴포넌트: 리워드 데이터를 서버에서 페칭하여 클라이언트 컴포넌트에 전달\n * \n * 장점:\n * - 초기 페이지 로드 시 빠른 렌더링 (서버에서 데이터 포함)\n * - SEO 최적화 (크롤러가 리워드 내용 인덱싱 가능)\n * - 클라이언트 번들 크기 감소\n * \n * 사용법:\n * ```tsx\n * <RewardListFetcher className=\"my-4\" showViewAllLink={true} />\n * ```\n */\nexport async function RewardListFetcher({ \n  className, \n  showViewAllLink = false \n}: RewardListFetcherProps = {}) {\n  const dbRewards = await fetchRewards();\n  const clientRewards = transformRewardData(dbRewards);\n  \n  return (\n    <div className={className}>\n      <RewardListPresenter\n        rewards={clientRewards} \n        showViewAllLink={showViewAllLink}\n      />\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]}