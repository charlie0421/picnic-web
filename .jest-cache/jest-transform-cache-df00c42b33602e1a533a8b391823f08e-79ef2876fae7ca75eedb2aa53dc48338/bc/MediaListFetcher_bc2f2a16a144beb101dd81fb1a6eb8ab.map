{"version":3,"names":["cov_2o27dvpzbl","actualCoverage","s","MediaListFetcher","className","b","f","supabase","_supabaseserverclient","createClient","data","mediaData","error","from","select","is","order","ascending","console","_jsxruntime","jsx","length","formattedMedia","map","item","title","_strings","getLocalizedString","thumbnail_url","_image","getCdnImageUrl","video_url","_media","MediaListPresenter","media"],"sources":["/Users/cheolhyun/Repositories/picnic-web/components/server/media/MediaListFetcher.tsx"],"sourcesContent":["import { createClient } from \"@/utils/supabase-server-client\";\nimport { MediaListPresenter } from \"@/components/client/media\";\nimport { Media } from \"@/types/interfaces\";\nimport { getLocalizedString } from \"@/utils/api/strings\";\nimport { getCdnImageUrl } from \"@/utils/api/image\";\n\nexport interface MediaListFetcherProps {\n  className?: string;\n}\n\n/**\n * 서버 컴포넌트: 미디어 데이터를 서버에서 페칭하여 클라이언트 컴포넌트에 전달\n * \n * 장점:\n * - 초기 페이지 로드 시 빠른 렌더링 (서버에서 데이터 포함)\n * - SEO 최적화 (크롤러가 미디어 내용 인덱싱 가능)\n * - 클라이언트 번들 크기 감소\n * \n * 사용법:\n * ```tsx\n * <MediaListFetcher className=\"my-4\" />\n * ```\n */\nexport async function MediaListFetcher({ className }: MediaListFetcherProps = {}) {\n  try {\n    const supabase = await createClient();\n    \n    const { data: mediaData, error } = await supabase\n      .from('media')\n      .select(`\n        id,\n        title,\n        thumbnail_url,\n        video_url,\n        video_id,\n        created_at,\n        updated_at,\n        deleted_at\n      `)\n      .is('deleted_at', null) // 삭제되지 않은 미디어만\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Media fetch error:', error);\n      return <div>미디어를 불러오는 중 오류가 발생했습니다.</div>;\n    }\n\n    if (!mediaData || mediaData.length === 0) {\n      return <div>표시할 미디어가 없습니다.</div>;\n    }\n\n    // 데이터 변환 - 실제 존재하는 필드만 사용\n    const formattedMedia: Media[] = mediaData.map((item) => ({\n      ...item,\n      title: getLocalizedString(item.title),\n      thumbnail_url: item.thumbnail_url ? getCdnImageUrl(item.thumbnail_url) : null,\n      video_url: item.video_url, // 비디오 URL은 CDN 처리하지 않음\n    }));\n\n    return <MediaListPresenter media={formattedMedia} className={className} />;\n  } catch (error) {\n    console.error('MediaListFetcher error:', error);\n    return <div>미디어를 불러오는 중 오류가 발생했습니다.</div>;\n  }\n} "],"mappings":"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","ignoreList":[]}